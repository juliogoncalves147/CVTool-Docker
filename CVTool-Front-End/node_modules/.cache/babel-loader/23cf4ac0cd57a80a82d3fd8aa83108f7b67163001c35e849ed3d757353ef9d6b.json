{"ast":null,"code":"import React,{useState,useRef}from\"react\";import{Link}from\"react-router-dom\";import UploadComponent from\"../components/UploadComponent\";import FileDisplay from\"../components/FileDisplay\";import QueryComponent from\"../components/QueryComponent\";import Footer from\"../components/Footer\";import Button from\"@mui/material/Button\";import UploadIcon from\"@mui/icons-material/Upload\";import DownloadIcon from\"@mui/icons-material/Download\";import RefreshIcon from\"@mui/icons-material/Refresh\";import HomeIcon from\"@mui/icons-material/Home\";import{Typography,IconButton}from\"@mui/material\";import FilePresentOutlinedIcon from\"@mui/icons-material/FilePresentOutlined\";import\"@fontsource/roboto/300.css\";import\"@fontsource/roboto/400.css\";import\"@fontsource/roboto/500.css\";import\"@fontsource/roboto/700.css\";import\"./ToolPage.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ToolPage(){const[fileData,setFileData]=useState(null);const[queryHistory,setQueryHistory]=useState([]);const[fileName,setFileName]=useState(\"\");const[refreshKey,setRefreshKey]=useState(0);const fileInputRef=useRef(null);const handleFileChange=async event=>{const file=event.target.files[0];if(file&&file.name.endsWith(\".tex\")){const formData=new FormData();formData.append(\"file\",file);const response=await fetch(\"http://127.0.0.1:8000/uploadfile/\",{method:\"POST\",body:formData});if(response.ok){const data=await response.json();setFileData(data.processed_file_path);setFileName(data.original_filename);}else{console.error(\"File upload failed\");}}else{alert(\"Only .tex files are allowed\");}};const handleDownloadClick=async()=>{if(!fileData){alert(\"No file to download\");return;}const response=await fetch(\"http://127.0.0.1:8000/downloadfile/?filename=\".concat(fileName),{method:\"GET\"});if(response.ok){const blob=await response.blob();const url=window.URL.createObjectURL(blob);const a=document.createElement(\"a\");a.href=url;a.download=fileName;document.body.appendChild(a);a.click();document.body.removeChild(a);}else{console.error(\"File download failed\");}};const handleUploadClick=()=>{fileInputRef.current.click();};const handleFileUpload=data=>{setFileData(data.processed_file_path);setFileName(data.original_filename);};const handleQuerySubmit=query=>{setQueryHistory([...queryHistory,query]);};const handleRefreshClick=()=>{setRefreshKey(prevKey=>prevKey+1);};return/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"navbar\",children:[/*#__PURE__*/_jsx(Button,{style:{backgroundColor:\"#ffffff\"},variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(UploadIcon,{}),onClick:handleUploadClick,children:\"Upload\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"navbar-content\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"navbar-title\",children:\"Resume Management Tool for LaTeX\"}),/*#__PURE__*/_jsx(IconButton,{component:Link,to:\"/\",style:{color:'#ffffff',marginLeft:'auto'},\"aria-label\":\"home\",children:/*#__PURE__*/_jsx(HomeIcon,{})})]}),/*#__PURE__*/_jsx(Button,{style:{backgroundColor:\"#ffffff\"},variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(DownloadIcon,{}),onClick:handleDownloadClick,disabled:!fileData,children:\"Download\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".tex\",ref:fileInputRef,style:{display:\"none\"},onChange:handleFileChange}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"left-pane\",children:/*#__PURE__*/_jsx(QueryComponent,{onQuerySubmit:handleQuerySubmit,queryHistory:queryHistory,fileName:fileName})}),/*#__PURE__*/_jsx(\"div\",{className:\"right-pane\",children:!fileData?/*#__PURE__*/_jsx(UploadComponent,{onFileUpload:handleFileUpload}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"file-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"file-name\",children:[/*#__PURE__*/_jsx(FilePresentOutlinedIcon,{}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",className:\"file-name-text\",children:fileName})]}),/*#__PURE__*/_jsx(Button,{style:{marginLeft:\"10px\"},variant:\"contained\",startIcon:/*#__PURE__*/_jsx(RefreshIcon,{}),onClick:handleRefreshClick,children:\"Refresh\"})]}),/*#__PURE__*/_jsx(FileDisplay,{fileData:fileData,fileName:fileName,refreshKey:refreshKey})]})})]}),/*#__PURE__*/_jsx(Footer,{})]});}export default ToolPage;","map":{"version":3,"names":["React","useState","useRef","Link","UploadComponent","FileDisplay","QueryComponent","Footer","Button","UploadIcon","DownloadIcon","RefreshIcon","HomeIcon","Typography","IconButton","FilePresentOutlinedIcon","jsx","_jsx","jsxs","_jsxs","ToolPage","fileData","setFileData","queryHistory","setQueryHistory","fileName","setFileName","refreshKey","setRefreshKey","fileInputRef","handleFileChange","event","file","target","files","name","endsWith","formData","FormData","append","response","fetch","method","body","ok","data","json","processed_file_path","original_filename","console","error","alert","handleDownloadClick","concat","blob","url","window","URL","createObjectURL","a","document","createElement","href","download","appendChild","click","removeChild","handleUploadClick","current","handleFileUpload","handleQuerySubmit","query","handleRefreshClick","prevKey","className","children","style","backgroundColor","variant","startIcon","onClick","component","to","color","marginLeft","disabled","type","accept","ref","display","onChange","onQuerySubmit","onFileUpload"],"sources":["/Users/juliogoncalves/Desktop/CVToolProject/cv-tool/src/pages/ToolPage.js"],"sourcesContent":["import React, { useState, useRef } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport UploadComponent from \"../components/UploadComponent\";\nimport FileDisplay from \"../components/FileDisplay\";\nimport QueryComponent from \"../components/QueryComponent\";\nimport Footer from \"../components/Footer\";\nimport Button from \"@mui/material/Button\";\nimport UploadIcon from \"@mui/icons-material/Upload\";\nimport DownloadIcon from \"@mui/icons-material/Download\";\nimport RefreshIcon from \"@mui/icons-material/Refresh\";\nimport HomeIcon from \"@mui/icons-material/Home\";\nimport { Typography , IconButton} from \"@mui/material\";\nimport FilePresentOutlinedIcon from \"@mui/icons-material/FilePresentOutlined\";\nimport \"@fontsource/roboto/300.css\";\nimport \"@fontsource/roboto/400.css\";\nimport \"@fontsource/roboto/500.css\";\nimport \"@fontsource/roboto/700.css\";\nimport \"./ToolPage.css\";\n\nfunction ToolPage() {\n  const [fileData, setFileData] = useState(null);\n  const [queryHistory, setQueryHistory] = useState([]);\n  const [fileName, setFileName] = useState(\"\");\n  const [refreshKey, setRefreshKey] = useState(0);\n  const fileInputRef = useRef(null);\n\n  const handleFileChange = async (event) => {\n    const file = event.target.files[0];\n    if (file && file.name.endsWith(\".tex\")) {\n      const formData = new FormData();\n      formData.append(\"file\", file);\n\n      const response = await fetch(\"http://127.0.0.1:8000/uploadfile/\", {\n        method: \"POST\",\n        body: formData,\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        setFileData(data.processed_file_path);\n        setFileName(data.original_filename);\n      } else {\n        console.error(\"File upload failed\");\n      }\n    } else {\n      alert(\"Only .tex files are allowed\");\n    }\n  };\n\n  const handleDownloadClick = async () => {\n    if (!fileData) {\n      alert(\"No file to download\");\n      return;\n    }\n\n    const response = await fetch(\n      `http://127.0.0.1:8000/downloadfile/?filename=${fileName}`,\n      {\n        method: \"GET\",\n      }\n    );\n\n    if (response.ok) {\n      const blob = await response.blob();\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement(\"a\");\n      a.href = url;\n      a.download = fileName;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n    } else {\n      console.error(\"File download failed\");\n    }\n  };\n\n  const handleUploadClick = () => {\n    fileInputRef.current.click();\n  };\n\n  const handleFileUpload = (data) => {\n    setFileData(data.processed_file_path);\n    setFileName(data.original_filename);\n  };\n\n  const handleQuerySubmit = (query) => {\n    setQueryHistory([...queryHistory, query]);\n  };\n\n  const handleRefreshClick = () => {\n    setRefreshKey((prevKey) => prevKey + 1);\n  };\n\n  return (\n    <div className=\"app-container\">\n      <div className=\"navbar\">\n        <Button\n          style={{ backgroundColor: \"#ffffff\" }}\n          variant=\"outlined\"\n          startIcon={<UploadIcon />}\n          onClick={handleUploadClick}\n        >\n          Upload\n        </Button>\n        <div className=\"navbar-content\">\n        <h1 className=\"navbar-title\">Resume Management Tool for LaTeX</h1>\n        <IconButton\n          component={Link}\n          to=\"/\"\n          style={{ color: '#ffffff', marginLeft: 'auto' }}\n          aria-label=\"home\">\n          <HomeIcon />\n        </IconButton>\n      </div>\n        <Button\n          style={{ backgroundColor: \"#ffffff\" }}\n          variant=\"outlined\"\n          startIcon={<DownloadIcon />}\n          onClick={handleDownloadClick}\n          disabled={!fileData}\n        >\n          Download\n        </Button>\n      </div>\n      <input\n        type=\"file\"\n        accept=\".tex\"\n        ref={fileInputRef}\n        style={{ display: \"none\" }}\n        onChange={handleFileChange}\n      />\n      <div className=\"content\">\n        <div className=\"left-pane\">\n          <QueryComponent\n            onQuerySubmit={handleQuerySubmit}\n            queryHistory={queryHistory}\n            fileName={fileName}\n          />\n        </div>\n        <div className=\"right-pane\">\n          {!fileData ? (\n            <UploadComponent onFileUpload={handleFileUpload} />\n          ) : (\n            <div>\n              <div className=\"file-header\">\n                <div className=\"file-name\">\n                  <FilePresentOutlinedIcon />\n                  <Typography variant=\"h6\" className=\"file-name-text\">\n                    {fileName}\n                  </Typography>\n                </div>\n                <Button\n                  style={{ marginLeft: \"10px\" }}\n                  variant=\"contained\"\n                  startIcon={<RefreshIcon />}\n                  onClick={handleRefreshClick}\n                >\n                  Refresh\n                </Button>\n              </div>\n              <FileDisplay\n                fileData={fileData}\n                fileName={fileName}\n                refreshKey={refreshKey}\n              />\n            </div>\n          )}\n        </div>\n      </div>\n      <Footer />\n    </div>\n  );\n}\n\nexport default ToolPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}